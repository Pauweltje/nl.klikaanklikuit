<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.generic_socket.views.generic_program.title',
	body: 'devices.AFR-100.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 17.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="455.942px" height="814.241px" viewBox="0 0 455.942 814.241" enable-background="new 0 0 455.942 814.241"\n\t xml:space="preserve" xmlns:pulse="-">\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#2B2A29" d="M454.465,358.067l-6.376-0.155\n\tc0.004-0.155,0.006-0.308,0.006-0.463h6.378C454.473,357.655,454.471,357.861,454.465,358.067"/>\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#2B2A29" d="M454.444,358.681l-6.372-0.278\n\tc0.007-0.149,0.013-0.298,0.016-0.448l6.377,0.166C454.459,358.308,454.452,358.494,454.444,358.681"/>\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#2B2A29" d="M454.411,359.277l-6.364-0.426l0.022-0.395l6.371,0.316\n\tC454.431,358.941,454.422,359.109,454.411,359.277"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M318.095,307.383c-5.331,0-9.734,4.375-10.024,9.96\n\tc-0.299,5.77,3.937,10.697,9.443,10.983c5.545,0.278,10.23-4.187,10.528-9.947c0.145-2.807-0.764-5.497-2.561-7.574\n\tc-1.782-2.06-4.226-3.271-6.882-3.409C318.429,307.387,318.262,307.383,318.095,307.383 M318.016,331.309\n\tc-0.218,0-0.437-0.005-0.658-0.017c-7.141-0.37-12.638-6.697-12.254-14.103c0.384-7.391,6.458-13.135,13.649-12.76\n\tc3.471,0.18,6.658,1.754,8.974,4.432c2.301,2.66,3.466,6.095,3.28,9.671C330.636,325.697,324.93,331.309,318.016,331.309z"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M118.919,63.913c29.378,5.786,68.431,8.972,109.965,8.972\n\tc41.533,0,80.587-3.187,109.964-8.972c29.622-5.834,45.935-13.703,45.935-22.159c0-8.455-16.313-16.324-45.935-22.159\n\tc-29.378-5.786-68.431-8.972-109.964-8.972c-41.533,0-80.587,3.187-109.965,8.972C89.297,25.43,72.983,33.299,72.983,41.754\n\tC72.983,50.209,89.297,58.078,118.919,63.913"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M448.114,487.908l-0.019,0.544h-0.831c0,8.95-4.517,17.69-13.156,25.912\n\tc-11.581,10.469-30.055,20.119-54.32,28.068c-3.736,1.224-7.642,2.417-11.613,3.547l-0.24,0.079c-1.593,0.593-2.907,1.294-4,2.057\n\tc-38.697,10.747-86.225,16.581-136.326,16.581c-49.597,0-96.676-5.715-135.16-16.256c-1.174-0.89-2.626-1.706-4.442-2.382\n\tl-0.241-0.079c-3.967-1.128-7.875-2.321-11.613-3.547c-37.334-12.231-60.957-28.487-66.843-45.558\n\tc-0.89-2.78-1.357-5.59-1.357-8.422l-0.107,0l-0.019-0.544c-1.12-29.186-2.503-65.294-0.209-124.699\n\tc6.618,15.992,28.68,30.652,63.787,42.051c41.944,13.618,97.679,21.118,156.94,21.118c59.26,0,114.996-7.5,156.94-21.118\n\tc33.97-11.03,55.726-25.114,63.096-40.503C450.591,423.237,449.223,458.979,448.114,487.908 M358.957,556.074l-0.202,9.867\n\tl-0.6,8.553l-0.49,2.649c-3.685,2.964-7.868,5.829-12.446,8.525c-2.31,1.36-4.721,2.669-7.21,3.935\n\tc-0.679,0.346-1.362,0.689-2.055,1.028c-0.108,0.052-0.217,0.105-0.325,0.158c-25.384,12.323-59.606,20.003-95.793,21.595\n\tc-0.214,0.009-0.429,0.017-0.643,0.026c-1.051,0.044-2.102,0.085-3.156,0.119c-0.69,0.022-1.382,0.037-2.074,0.055\n\tc-0.626,0.016-1.25,0.035-1.877,0.047c-1.365,0.026-2.734,0.046-4.105,0.056c-0.236-0.001-0.471-0.007-0.707-0.009\n\tc-1.118-0.01-2.236-0.024-3.35-0.045c-0.925-0.018-1.848-0.044-2.771-0.071c-0.39-0.01-0.781-0.019-1.17-0.031\n\tc-39.212-1.249-76.322-9.632-102.875-23.348c-0.142-0.073-0.286-0.145-0.427-0.218l-0.569-0.295\n\tc-1.847-0.974-3.646-1.974-5.39-3.001c-4.579-2.695-8.762-5.56-12.446-8.525l-1.266-20.682l-0.026-0.388\n\tc-0.134-1.044-0.432-2.209-0.997-3.391c37.925,9.868,83.616,15.201,131.62,15.201c48.357,0,94.365-5.412,132.453-15.419\n\tC359.428,553.721,359.1,554.965,358.957,556.074z M333.523,703.687c-0.68,24.696-2.984,29.494-12.545,39.29\n\tc-3.219,3.298-6.367,6.451-9.461,9.494c-21.467,7.391-49.973,11.576-79.486,11.576c-38.644,0-74.101-6.964-95.692-18.482\n\tc-1.247-1.304-2.332-2.462-3.218-3.432l-0.581-0.706c-4.168-5.073-7.517-9.158-9.319-18.062\n\tc30.164,24.128,105.342,24.435,108.809,24.435c9.71,0,19.39-0.41,28.771-1.218l-0.547-6.355c-9.2,0.793-18.696,1.195-28.224,1.195\n\tc-35.444,0-93.477-7.518-110.03-28.152c-0.074-1.252-0.133-2.562-0.171-3.952l-0.535-19.448\n\tc18.113,15.73,61.056,26.182,110.736,26.182c9.71,0,19.39-0.41,28.771-1.218l-0.547-6.354c-9.2,0.793-18.696,1.195-28.224,1.195\n\tc-26.72,0-52.749-3.2-73.29-9.01c-18.989-5.371-32.299-12.597-37.711-20.436l-0.712-25.896\n\tc17.537,16.148,61.731,27.07,111.713,27.07c9.71,0,19.39-0.41,28.771-1.218l-0.547-6.355c-9.2,0.793-18.696,1.195-28.224,1.195\n\tc-51.758,0-98.299-12.182-110.664-28.969c-0.173-0.235-0.466-0.597-0.786-0.991c-0.144-0.178-0.35-0.43-0.536-0.665l-0.706-25.694\n\tc16.829,16.706,61.388,28.003,112.692,28.003c9.719,0,19.398-0.41,28.771-1.218l-0.547-6.355\n\tc-9.191,0.793-18.687,1.195-28.224,1.195c-53.074,0-99.86-12.535-111.247-29.802c-0.059-0.089-0.437-0.639-0.895-1.304\n\tc-0.271-0.395-0.571-0.831-0.845-1.229l-0.299-10.882c0.05,0.024,0.102,0.047,0.152,0.071c0.441,0.209,0.889,0.415,1.334,0.621\n\tc0.599,0.278,1.2,0.556,1.807,0.829c0.281,0.126,0.564,0.251,0.846,0.375c0.852,0.378,1.711,0.751,2.577,1.119\n\tc0.065,0.028,0.13,0.055,0.195,0.083c24.916,10.551,55.729,16.96,89.029,18.494c0.089,0.004,0.177,0.008,0.266,0.013\n\tc1.205,0.055,2.414,0.103,3.626,0.144c0.306,0.01,0.611,0.022,0.917,0.032c1.024,0.032,2.052,0.058,3.081,0.082\n\tc0.412,0.01,0.823,0.022,1.236,0.029c1.181,0.022,2.364,0.037,3.549,0.048c0.197,0.001,0.392,0.007,0.589,0.008l0.021,0h0.022\n\tc1.408-0.01,2.813-0.03,4.213-0.057c0.283-0.005,0.564-0.014,0.847-0.02c1.172-0.026,2.341-0.056,3.508-0.094\n\tc0.191-0.006,0.382-0.014,0.573-0.02c36.203-1.223,69.733-8.191,96.18-19.973c0.112-0.05,0.227-0.099,0.34-0.149\n\tc0.941-0.421,1.872-0.849,2.794-1.282c0.064-0.03,0.13-0.058,0.194-0.088L333.523,703.687z M224.364,807.861\n\tc-12.8-0.009-32.078-12.616-49.859-27.061c17.495,4.623,37.178,7.055,57.525,7.055c15.311,0,30.078-1.347,44.022-4.001\n\tC255.171,799.879,238.072,807.8,224.364,807.861z M8.996,350.588c2.002-3.379,3.975-6.774,5.869-10.097\n\tc16.025-28.114,28.566-54.964,37.33-79.879c7.214,8.997,24.483,15.532,39.542,19.751c26.332,7.375,62.662,12.424,102.479,14.257\n\tc-0.871,16.086-1.964,30.45-3.281,43.023l-0.007,0.096c-0.665,15.155,3.127,23.53,11.297,24.898\n\tc18.068,2.679,37.021,4.037,56.332,4.037c31.565,0,65.256-3.629,100.142-10.786c15.166-1.543,24.395-5.467,28.216-11.994\n\tc2.652-4.531,2.527-10.199-0.37-16.847l-0.144-0.26c-6.859-10.073-12.313-25.065-16.211-44.563\n\tc-0.236-1.177-0.418-2.165-0.562-3.057c16.992-5.124,28.637-11.045,34.496-17.469c8.745,24.607,21.16,51.088,36.951,78.793\n\tc1.892,3.319,3.866,6.715,5.869,10.096c0.475,1.416,0.786,2.845,0.967,4.273c-0.729,8.511-6.326,16.841-16.675,24.785\n\tc-10.999,8.443-26.791,16.041-46.937,22.582c-41.634,13.517-97.019,20.962-155.954,20.962c-58.936,0-114.322-7.445-155.955-20.962\n\tc-20.146-6.541-35.938-14.139-46.937-22.582c-11.124-8.54-16.764-17.522-16.764-26.698H8.358\n\tC8.531,352.16,8.733,351.372,8.996,350.588z M338.847,328.115v-175.26c3.653-0.365,7.32-0.738,11.016-1.133\n\tc10.833,0.787,16.067,6.026,16.001,16.027c0.077,53.969,0.096,88.21,0.058,101.775c-0.016,5.768-0.021,7.51,1.141,13.324\n\tc3.967,19.838,9.558,35.181,16.618,45.607c1.598,3.712,2.203,7.004,1.824,9.844C370.75,335.4,355.077,331.981,338.847,328.115z\n\t M214.379,310.899c-0.364,5.51-0.632,13.679-0.19,18.566c0.543,6.005,5.456,8.816,10.987,10.208l-2.919,7.84\n\tc-0.228,0.592-0.704,1.826-0.005,2.936c0.785,1.246,2.471,1.473,4.825,1.661c13.889,0.628,26.196,0.997,38.733,1.157l0.447,0.003\n\tc1.325,0,2.486-0.067,3.281-0.89c0.751-0.78,0.751-1.754,0.751-2.894v-7.979c24.809-0.865,50.639-4.174,67.078-10.467\n\tc16.438,3.925,32.318,7.396,47.263,10.338c-0.142,0.308-0.292,0.611-0.464,0.905c-3.231,5.52-11.932,9.032-25.864,10.44\n\tl-0.161,0.025c-34.703,7.125-68.206,10.737-99.581,10.737c-19.155,0-37.951-1.346-55.835-3.998c-6.286-1.053-9.183-8.307-8.61-21.56\n\tc3.896-37.242,5.853-90.045,5.815-156.946c1.041-7.487,3.017-12.417,5.758-15.643C215.105,206.666,218.03,255.609,214.379,310.899z\n\t M225.238,348.643l2.815-7.559c0.101,0.009,0.203,0.017,0.304,0.026c7.111,0.54,15.314,0.825,23.723,0.825\n\tc4.972,0,10.015-0.098,15.017-0.29v7.854c0,0.181,0,0.384-0.004,0.56c-0.184,0.014-0.452,0.024-0.839,0.024l-0.406-0.003\n\tc-12.501-0.16-24.775-0.526-38.574-1.151c-1.057-0.085-1.682-0.173-2.051-0.248C225.229,348.669,225.233,348.656,225.238,348.643z\n\t M269.405,338.357c-12.749,0.414-25.207,0.177-35.918-0.636c-10.694-0.874-15.667-3.508-16.123-8.543\n\tc-0.425-4.704-0.16-12.673,0.196-18.069c3.724-56.392,0.632-106.248-9.18-148.25c3.059-2.177,6.775-3.021,11.007-3.268\n\tc37.354-0.334,75.534-2.444,116.27-6.422v175.107c-16.133,6.031-41.214,9.208-65.371,10.049v-0.006L269.405,338.357z\n\t M53.522,256.797l0.026-208.01c6.166,9.158,23.42,17.465,50.103,23.917c33.28,8.047,77.504,12.478,124.525,12.478\n\tc47.02,0,91.244-4.431,124.525-12.478c26.116-6.314,43.194-14.406,49.69-23.334l0.029,207.428l0.171,0.5\n\tc0.106,0.31,0.22,0.626,0.326,0.937c-4.732,6.31-16.288,12.424-33.682,17.72c-0.135-1.78-0.13-3.58-0.122-6.419\n\tc0.038-13.57,0.018-47.817-0.058-101.776c0.078-11.713-6.53-18.361-19.109-19.227l-0.139-0.01l-0.14,0.015\n\tc-46.091,4.922-88.728,7.495-130.345,7.866l-0.077,0.002c-5.787,0.333-10.325,1.854-13.803,4.748l-0.695,0.167\n\tc0.029,0.121,0.056,0.244,0.086,0.365c-4.288,3.914-6.856,10.097-8.076,18.969l-0.015,0.218\n\tc0.025,42.762-0.766,79.736-2.356,110.563c-39.59-1.822-75.675-6.83-101.787-14.144c-21.25-5.952-34.761-13.032-39.125-20.352\n\tL53.522,256.797z M129.986,13.791c41.957-6.155,86.335-7.413,95.922-7.413l2.072,0.003l2.054-0.003\n\tc9.587,0,53.965,1.259,95.922,7.413c45.897,6.733,72.575,16.992,76.023,29.095c-4.059,21.373-81.99,39.106-173.802,39.106\n\tc-93.054,0-171.853-18.215-173.931-39.974C58.696,30.292,85.19,20.362,129.986,13.791z M454.473,357.382\n\tc-0.008-3.077-0.548-6.17-1.608-9.194l-0.105-0.299l-0.162-0.273c-2.043-3.444-4.054-6.904-5.981-10.284\n\tc-16.43-28.825-29.153-56.273-37.82-81.593L408.77,46.184c0.003-0.175-0.004-0.367-0.016-0.556l-0.005-0.037\n\tc0-17.563-26.779-30.029-81.869-38.11C284.542,1.27,239.719,0,230.034,0l-2.054,0.003L225.908,0c-9.686,0-54.508,1.27-96.848,7.481\n\tc-55.09,8.082-81.869,20.548-81.869,38.065l-0.005,0.077c-0.013,0.192-0.019,0.387-0.016,0.565l-0.027,209.552\n\tc-8.668,25.321-21.391,52.77-37.82,81.593c-1.928,3.384-3.94,6.844-5.981,10.284l-0.162,0.273l-0.105,0.299\n\tc-1.059,3.023-1.6,6.115-1.607,9.194c-2.613,62.987-1.173,100.571-0.016,130.77l0.016,0.398\n\tc0.047,23.31,25.861,44.597,72.699,59.942c3.779,1.237,7.723,2.443,11.727,3.583c3.74,1.423,4.526,3.292,4.739,4.64l0.315,12.535\n\tl0.695,7.33l3.148-0.509l-3.128,0.627l0.454,2.104l0.661,1.709c0.047,0.089,0.094,0.173,0.143,0.254l0.284,0.47l0.425,0.348\n\tc4.082,3.346,8.744,6.568,13.857,9.578c1.553,0.914,3.155,1.804,4.787,2.678l3.179,115.653c0.602,21.917,5.958,28.434,12.16,35.982\n\tl0.625,0.761c0.556,0.68,63.043,68.003,96.14,68.003l0.014-0.001c24.632-0.109,56.774-21.338,101.152-66.808\n\tc11.388-11.668,13.669-18.59,14.356-43.563l3.218-109.729c1.826-0.968,3.608-1.958,5.338-2.977c5.112-3.01,9.775-6.232,13.857-9.578\n\tl0.436-0.357l0.287-0.485c0.039-0.066,0.078-0.136,0.117-0.207l0.139-0.272l0.988-3.56l1.03-19.991\n\tc0.214-1.348,1.001-3.214,4.739-4.638c4.007-1.141,7.952-2.347,11.727-3.583c46.837-15.345,72.651-36.632,72.699-59.942l0.016-0.398\n\tC455.645,457.954,457.086,420.37,454.473,357.382z"/>\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M317.513,328.326c5.545,0.278,10.23-4.187,10.528-9.947\n\tc0.145-2.807-0.764-5.497-2.561-7.574c-1.782-2.06-4.226-3.271-6.882-3.409c-0.169-0.008-0.336-0.013-0.503-0.013\n\tc-5.331,0-9.734,4.375-10.024,9.96C307.772,323.113,312.007,328.04,317.513,328.326"/>\n<path pulse:initial="true" fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M252.081,341.934c-8.409,0-16.612-0.285-23.723-0.825l-0.304-0.026\n\tl-2.815,7.559l-0.014,0.037c0.369,0.076,0.994,0.164,2.051,0.248c13.799,0.624,26.073,0.991,38.574,1.151l0.406,0.003\n\tc0.387,0,0.655-0.01,0.839-0.024l0.004-0.56v-7.854C262.096,341.837,257.052,341.934,252.081,341.934"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(err.message && err.message.indexOf(' ') === -1 && __(err.message) !== err.message ? __(err.message) : JSON.stringify(err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>