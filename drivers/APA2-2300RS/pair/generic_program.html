<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.generic_socket.views.generic_program.title',
	body: 'deviceClasses.simple_socket.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<!-- Creator: CorelDRAW X7 -->\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:animation="-" xmlns:pulse="-" xmlns:show="-" xmlns:hide="-"  xml:space="preserve" width="1667px" height="2110px" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 1667 2110" xmlns:xlink="http://www.w3.org/1999/xlink">\n <defs>\n  <style type="text/css">\n   <![CDATA[\n    .fil1 {fill:#2B2A29}\n    .fil0 {fill:#2B2A29;fill-rule:nonzero}\n   ]]>\n  </style>\n </defs>\n <g id="Layer_x0020_1">\n  <path class="fil0" d="M663 1958c0,0 1,0 1,0l1 0c38,0 77,-20 109,-53 35,-35 62,-85 73,-140 30,-150 61,-300 91,-450 23,-110 45,-221 68,-332 22,-112 45,-224 68,-336 30,-147 60,-294 90,-441 3,-18 5,-35 5,-52 0,-37 -9,-71 -25,-96 -16,-25 -38,-42 -66,-47 -7,-1 -13,-2 -21,-2l-275 0 -271 0c-39,0 -79,22 -112,56 -33,36 -59,85 -70,138 -28,137 -57,275 -85,412 -24,117 -48,233 -72,350 -23,113 -47,226 -70,340 -29,141 -58,283 -88,425 -2,14 -4,28 -5,41 -2,41 6,78 22,106 11,19 26,34 44,43l3 1c5,3 11,5 18,7 6,2 12,3 19,3l189 9 81 4 3 0 271 14c1,0 2,0 4,0zm308 139l54 4c39,3 80,-16 113,-49 33,-33 59,-81 70,-135l149 -775 2 -11 30 -154 1 -6 0 0 25 -130 18 -92 38 -200 5 -24 0 0 0 -1 0 0 0 0 0 0c5,-25 2,-56 -5,-86 -6,-27 -16,-51 -26,-65l-164 777 -161 765c-12,54 -39,102 -74,136 -22,22 -48,38 -75,46zm500 -1086c5,-15 10,-35 15,-57 5,-24 10,-49 13,-69l0 0 0 -1 -76 -39 -25 130 73 36zm30 -87c-2,11 -4,22 -6,32 -5,22 -11,44 -16,59l0 0 -1 3c-5,14 -21,34 -40,54 -23,24 -52,49 -71,62l-1 9 -150 775c-10,56 -37,106 -72,140 -35,35 -78,55 -120,52l-268 -21 -263 -21c-3,-1 -6,-1 -10,-2 -3,0 -6,-1 -9,-2l-68 -5c-2,0 -5,-1 -7,-1 -3,-1 -6,-1 -8,-2l0 0c-1,0 -3,0 -4,-1 -1,0 -3,0 -4,-1 -36,-10 -119,-41 -191,-70 -55,-22 -104,-44 -118,-55 -13,-6 -25,-15 -35,-26l0 -1 0 1c-6,-7 -11,-14 -15,-22 -17,-29 -26,-68 -24,-110 1,-14 3,-28 6,-43 29,-142 58,-283 87,-425 24,-114 47,-227 70,-340 24,-117 48,-233 72,-349 29,-138 57,-275 85,-413 12,-55 39,-105 73,-142 35,-36 77,-59 118,-59l271 0 275 0c8,0 15,1 23,2 8,2 17,5 24,9l0 -1c43,18 96,43 145,69 49,25 94,52 123,71 6,5 12,9 17,13 4,4 8,7 10,10 23,18 39,46 48,80 8,31 9,69 0,108 13,14 25,43 33,75 7,31 10,64 5,90l0 0 0 0 0 0 0 1 0 0 -5 21c12,11 35,41 51,72 11,22 19,45 17,62 -3,20 -6,43 -10,63 -3,19 -6,34 -8,44l21 14 2 2 0 2c0,10 -3,30 -8,48l97 48 8 4 0 0 0 0c5,4 10,10 13,16 3,7 4,14 4,22 0,11 -3,22 -9,30 -6,8 -15,13 -25,13 -2,0 -4,-1 -6,-1 -3,-1 -5,-2 -7,-3l0 0 -119 -60zm-461 1121c33,-33 60,-79 71,-132l161 -764 166 -787 2 -7c7,-36 6,-71 -2,-100 -8,-32 -23,-58 -44,-75l-1 -1 0 0c-2,-3 -6,-6 -10,-9 -4,-4 -10,-8 -16,-12 -29,-20 -74,-46 -122,-71 -36,-19 -74,-38 -109,-53 9,9 16,20 23,32 12,24 19,55 19,88 0,9 0,18 -1,26 -1,9 -3,18 -4,27l-30 144c-20,100 -40,200 -60,299 -22,108 -44,217 -66,325l-2 10c-23,111 -45,221 -68,332 -30,150 -61,300 -91,450 -12,57 -40,108 -75,144 -34,34 -76,56 -117,56l0 0c0,0 -1,0 -1,0 -2,0 -3,0 -5,0l-273 -14 -270 -13c-2,0 -3,0 -5,0 23,10 53,23 85,36 72,29 155,59 190,70 2,0 3,1 5,1 1,0 2,1 3,1l0 0c2,0 5,1 7,1 2,0 4,1 7,1l68 6 190 15 263 21c2,1 4,1 5,1 1,0 2,0 2,0l0 0c40,0 77,-21 105,-48zm384 -1205l24 -1c5,-16 9,-35 12,-52 2,-13 2,-24 2,-32l-21 0 -17 85zm32 3l71 39c3,-5 6,-16 10,-28 3,-17 6,-35 7,-45l-73 -50c0,8 -1,19 -3,30 -2,17 -7,37 -12,54zm-14 -97l24 0 1 0 1 1 54 37c2,-10 5,-24 7,-40 4,-20 8,-43 10,-63 2,-15 -5,-36 -16,-57 -14,-27 -33,-53 -45,-65l-36 187z"/>\n  <path pulse:initial="true" class="fil0" d="M488 1490c4,0 7,0 10,2 3,1 6,3 8,6 2,2 4,5 5,9 0,3 1,7 0,10 0,4 -1,8 -3,11 -2,4 -4,7 -7,9 -3,3 -6,5 -10,6 -3,2 -7,2 -10,2 -4,0 -8,-1 -11,-2l0 0c-3,-2 -6,-4 -8,-7 -2,-3 -3,-6 -4,-10 0,-3 0,-7 0,-10l0 0c1,-4 2,-7 4,-10 2,-4 4,-6 7,-9 3,-2 6,-4 9,-5 3,-2 7,-2 10,-2zm7 8c-2,-1 -4,-1 -7,-1 -2,0 -5,0 -7,1 -1,1 -2,1 -2,1 -5,4 -8,10 -10,17 -1,7 0,14 4,19 0,1 1,1 2,2 2,1 3,1 5,1 3,0 6,0 8,-1 3,-1 6,-3 8,-5 2,-2 4,-5 5,-7 2,-3 3,-6 3,-9 0,-3 0,-5 -1,-7 0,-3 -1,-5 -3,-7 -1,-1 -3,-3 -5,-4z"/>\n  <path class="fil0" d="M747 112c47,2 90,14 127,36 38,22 71,54 96,93 25,39 43,86 52,138 8,50 9,104 -1,162 -10,58 -29,114 -55,166 -26,53 -61,101 -101,142 -40,41 -86,75 -135,97 -47,22 -96,34 -146,34 -50,-1 -96,-14 -135,-37 -41,-23 -75,-58 -101,-101 -25,-42 -42,-92 -49,-147 -6,-53 -4,-110 9,-170 12,-59 34,-114 62,-163 29,-52 65,-98 106,-136 40,-37 85,-67 132,-87 45,-19 93,-28 139,-27zm123 43c-36,-20 -77,-33 -123,-34 -45,-2 -91,8 -136,27 -45,19 -89,48 -129,84 -40,38 -76,83 -104,134 -28,49 -49,103 -61,161 -13,59 -16,115 -9,167 7,54 23,103 48,144 25,41 58,75 97,98 38,22 82,34 131,35 48,0 96,-12 142,-33 48,-22 93,-55 133,-95 39,-40 73,-88 100,-140 25,-51 44,-106 53,-164 10,-56 10,-110 1,-159 -8,-51 -26,-96 -50,-135 -25,-37 -56,-68 -93,-90z"/>\n  <path class="fil1" d="M836 813c35,-36 66,-79 89,-126 23,-46 40,-95 48,-147 7,-38 8,-74 5,-109 -2,-35 -10,-68 -21,-98 -3,-6 -5,-12 -8,-18 -4,-5 -7,-11 -10,-16 -3,-5 -6,-9 -10,-14 -2,-3 -5,-7 -8,-11 -34,5 -67,15 -99,31 -33,17 -66,40 -95,67 -13,13 -26,26 -38,41 -13,14 -24,29 -35,46l0 0 -6 10 -25 130 -1 7 -1 3 -3 0 -32 0c-1,4 -2,9 -3,13 -2,5 -3,10 -4,15 -2,8 -3,16 -4,23 -1,7 -2,13 -3,20l30 13 4 2 -1 3 -27 128 3 10c4,14 8,29 14,42 6,14 12,27 19,39 2,2 3,4 4,6 1,1 1,2 2,3 38,-4 76,-16 111,-34 38,-20 74,-47 105,-79zm-134 -157c3,-15 11,-28 21,-38 8,-7 17,-12 26,-14 1,1 2,2 3,3 1,1 2,2 3,3 1,1 2,2 2,4 3,4 5,9 6,15 1,6 1,13 0,20 -1,7 -3,13 -6,20 -3,6 -8,12 -12,16 -5,5 -10,9 -15,12 -5,2 -11,4 -16,4l0 0 -1 0 -1 0c0,0 -1,0 -2,0 -1,-2 -2,-3 -3,-4 -6,-11 -8,-25 -5,-41zm-241 -290l-25 135 -47 0c7,-25 17,-49 27,-71 12,-24 25,-46 39,-67l5 2 1 1zm-27 143l161 84 -36 -2 -162 -82 37 0zm497 -236l0 0 -4 -7c-22,-33 -51,-61 -85,-80 -33,-19 -70,-30 -111,-31 -42,-1 -84,8 -125,25 -42,17 -82,44 -118,78 -36,34 -69,75 -95,122 -25,45 -44,94 -55,147 -12,54 -14,106 -8,153 6,50 21,95 44,133 23,38 53,70 90,91 35,21 76,32 121,33 4,0 9,0 13,-1 5,0 10,0 14,-1l3 0 1 0 2 0 0 0 1 0c40,-3 79,-16 116,-35 39,-20 75,-48 108,-81 35,-37 66,-80 90,-128 24,-46 40,-97 49,-150 7,-38 8,-75 5,-110 -3,-37 -10,-71 -22,-102l0 0c-3,-6 -6,-12 -9,-18 -3,-6 -6,-11 -10,-17 -3,-5 -6,-9 -9,-14 -2,-2 -4,-5 -6,-7zm-538 493c-1,0 -3,-1 -4,-1 -8,-21 -14,-44 -17,-69 -4,-23 -5,-47 -4,-72l45 0 6 2 -26 140zm379 -116c-1,8 -4,16 -7,22 -4,8 -9,14 -14,20 -5,5 -11,9 -17,13 -7,3 -13,4 -20,5l0 0 -1 0 0 0 -1 0 0 0c-7,0 -13,-2 -19,-6 -6,-3 -10,-8 -14,-14 -3,-6 -6,-13 -7,-20 -1,-8 0,-15 1,-23 2,-8 5,-16 9,-22 4,-8 9,-14 14,-19 5,-5 12,-9 18,-12 6,-2 13,-4 19,-3 5,0 10,1 14,2 4,2 8,4 11,7 1,2 2,3 4,4 1,2 2,3 3,5 3,5 6,12 7,19 1,7 1,14 0,22z"/>\n </g>\n</svg>',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(__(err.message || err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>