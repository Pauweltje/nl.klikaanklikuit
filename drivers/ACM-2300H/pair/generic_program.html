<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.build_in.views.generic_program.title',
	body: 'deviceClasses.build_in.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 1457.2 1066" style="enable-background:new 0 0 1457.2 1066;" xml:space="preserve" xmlns:pulse="-">\n<style type="text/css">\n\t.st0{fill:#0074CC;}\n</style>\n<g>\n\t<path d="M562.1,912.6h-94.4v75.8h94.4V912.6z M559.2,985.5h-88.7v-70.1h88.7V985.5z"/>\n\t<path d="M544.2,834.2h-58.6v65.3h58.6V834.2z M541.4,896.7h-53V837h53V896.7z"/>\n\t<path d="M669.3,988.3v-75.8h-94.4v75.8H669.3z M577.7,915.4h88.7v70.1h-88.7V915.4z"/>\n\t<path d="M651.4,834.2h-58.6v65.3h58.6V834.2z M648.5,896.7h-53V837h53V896.7z"/>\n\t<path d="M776.4,988.3v-75.8H682v75.8H776.4z M684.9,915.4h88.7v70.1h-88.7V915.4z"/>\n\t<path d="M758.5,834.2h-58.6v65.3h58.6V834.2z M755.7,896.7h-53V837h53V896.7z"/>\n\t<path d="M883.6,988.3v-75.8h-94.4v75.8H883.6z M792,915.4h88.7v70.1H792V915.4z"/>\n\t<path d="M865.7,834.2h-58.6v65.3h58.6V834.2z M862.9,896.7h-53V837h53V896.7z"/>\n\t<path d="M990.8,988.3v-75.8h-94.4v75.8H990.8z M899.2,915.4h88.7v70.1h-88.7V915.4z"/>\n\t<path d="M972.9,834.2h-58.6v65.3h58.6V834.2z M970.1,896.7h-53V837h53V896.7z"/>\n\t<path d="M619,940.5c-2.2,0-4.2,0.7-6,2s-3.2,3.2-4.1,5.7c-1,2.5-1.5,5-1.5,7.7c0,0.9,0,1.7,0.1,2.5l-5.9-2.4\n\t\tc-0.5,3.1-1.4,5.3-2.6,6.7c-1.2,1.4-2.6,2.1-4.3,2.1c-2.3,0-4.1-1.1-5.5-3.4c-1.4-2.2-2.1-6-2.1-11.2c0-5,0.7-8.5,2.2-10.8\n\t\tc1.4-2.2,3.3-3.3,5.6-3.3c1.7,0,3.1,0.6,4.3,1.9c1.2,1.2,1.9,3,2.3,5.1l6.2-2c-0.7-3.3-1.8-5.9-3.2-7.7c-2.4-3-5.5-4.5-9.3-4.5\n\t\tc-4.4,0-7.9,1.9-10.5,5.8c-2.7,3.8-4,9.2-4,16.1c0,6.6,1.3,11.7,4,15.5s6.1,5.7,10.2,5.7c3.3,0,6.1-1.1,8.3-3.3\n\t\tc2.1-2.2,3.6-5.4,4.6-9.7c0.2,2.2,0.6,4.1,1.3,5.8c1,2.4,2.4,4.3,4.3,5.5c1.9,1.2,3.8,1.9,5.9,1.9c3.3,0,6.1-1.5,8.3-4.5\n\t\ts3.3-6.8,3.3-11.4c0-4.5-1.1-8.3-3.3-11.2C625.2,942,622.4,940.5,619,940.5z M623,963.1c-1,1.6-2.4,2.4-3.9,2.4\n\t\tc-1.6,0-2.9-0.8-3.9-2.4c-1.1-1.6-1.6-3.9-1.6-6.9s0.5-5.3,1.6-6.9c1.1-1.6,2.4-2.4,3.9-2.4s2.9,0.8,3.9,2.4c1,1.6,1.6,3.9,1.6,6.8\n\t\tC624.6,959.2,624,961.5,623,963.1z"/>\n\t<path d="M660.6,941.8c-1.2-0.9-2.5-1.3-4.2-1.3c-1.3,0-2.5,0.4-3.7,1.2c-1.1,0.8-2.2,2-3.2,3.6c-0.7-1.6-1.5-2.8-2.6-3.6\n\t\ts-2.3-1.2-3.8-1.2c-2.7,0-5.1,1.6-7,4.8v-4.1h-5.5v30.2h6v-14.6c0-2.9,0.2-5,0.5-6.2s0.8-2.2,1.6-2.9c0.7-0.7,1.6-1,2.5-1\n\t\tc0.8,0,1.4,0.2,1.8,0.6c0.4,0.4,0.8,1.1,1,1.9c0.2,0.8,0.3,2.7,0.3,5.7v16.5h6v-14.5c0-2.8,0.2-4.9,0.5-6.2s0.9-2.3,1.6-3\n\t\tc0.7-0.7,1.5-1,2.4-1c1.1,0,2,0.6,2.5,1.7c0.4,0.9,0.6,2.8,0.6,5.8v17.2h6V952c0-2.9-0.2-5-0.6-6.2\n\t\tC662.6,944,661.8,942.7,660.6,941.8z"/>\n\t<polygon points="833.2,924.7 823.1,924.7 823.1,974.4 858.4,974.4 858.4,966 833.2,966 \t"/>\n\t<polygon points="955.3,958.3 934.7,924.7 924.8,924.7 924.8,974.8 934.2,974.8 934.2,941.8 954.6,974.8 964.7,974.8 964.7,924.7\n\t\t955.3,924.7 \t"/>\n\t<path d="M740.8,949.3c-2.3-1.2-6-2.5-10.9-3.6c-4.9-1.2-8-2.3-9.3-3.4c-1-0.8-1.5-1.9-1.5-3c0-1.3,0.5-2.3,1.6-3.1\n\t\tc1.6-1.2,3.9-1.8,6.9-1.8c2.8,0,5,0.6,6.4,1.7c1.4,1.1,2.3,3,2.8,5.6l10.2-0.4c-0.2-4.7-1.8-8.4-5-11.2s-7.9-4.2-14.2-4.2\n\t\tc-3.9,0-7.1,0.6-9.8,1.8s-4.8,2.9-6.2,5.1c-1.4,2.2-2.2,4.6-2.2,7.2c0,4,1.5,7.4,4.6,10.1c2.2,2,6,3.6,11.4,5\n\t\tc4.2,1.1,6.9,1.8,8.1,2.2c1.7,0.6,2.9,1.3,3.6,2.2c0.7,0.8,1,1.8,1,3c0,1.8-0.8,3.5-2.5,4.8c-1.6,1.4-4.1,2.1-7.3,2.1\n\t\tc-3.1,0-5.5-0.8-7.3-2.3c-1.8-1.6-3-4-3.6-7.3l-9.9,1c0.7,5.6,2.7,9.9,6.1,12.8c3.4,2.9,8.3,4.4,14.6,4.4c4.4,0,8-0.6,10.9-1.8\n\t\ts5.2-3.1,6.8-5.6s2.4-5.2,2.4-8.1c0-3.2-0.7-5.8-2-8C745,952.2,743.1,950.6,740.8,949.3z"/>\n\t<path d="M514.9,976.5c7.4,0,13.3-2.3,17.7-6.9c4.4-4.6,6.6-10.9,6.6-19.1c0-8.2-2.2-14.6-6.7-19.2c-4.5-4.6-10.4-6.9-17.8-6.9\n\t\tc-4.1,0-7.7,0.7-10.8,2c-2.3,1-4.5,2.5-6.5,4.5s-3.5,4.3-4.7,6.9c-1.5,3.5-2.3,7.8-2.3,12.9c0,8,2.2,14.3,6.6,18.9\n\t\tC501.5,974.2,507.5,976.5,514.9,976.5z M504.8,937.5c2.6-2.9,5.9-4.3,10.1-4.3c4.2,0,7.5,1.4,10.1,4.3c2.5,2.8,3.8,7.1,3.8,12.9\n\t\tc0,5.8-1.3,10.2-3.9,13.1c-2.6,2.9-5.9,4.4-10,4.4c-4,0-7.4-1.5-10-4.4s-3.9-7.3-3.9-12.9C501,944.6,502.2,940.3,504.8,937.5z"/>\n\t<path d="M1398.2,503.1h-59c-10.9,0-19.8,8.9-19.8,19.8v26.3c0,10.9,8.9,19.8,19.8,19.8h59c18.2,0,32.9-14.8,32.9-32.9\n\t\tC1431.2,517.9,1416.4,503.1,1398.2,503.1z M1398.2,565.5h-59c-9,0-16.3-7.3-16.3-16.3V523c0-9,7.3-16.3,16.3-16.3h59\n\t\tc16.2,0,29.4,13.2,29.4,29.4S1414.5,565.5,1398.2,565.5z"/>\n\t<path d="M1441.7,471H1262V266c0-3.9-1.6-7.5-4.2-10.1c-47.7-55.2-82.8-94.5-120-131.9c-37.5-37.7-76.8-73.2-132.7-120.7\n\t\tc-2.7-2.2-5.9-3.3-9.1-3.3l0,0H728.6H461.3c-3.8,0-7.3,1.5-9.9,4c-55.6,47.2-94.7,82.5-132,120.1c-37.4,37.6-72.7,77.1-120.7,132.7\n\t\tc-2.3,2.7-3.4,6-3.4,9.2l0,0v203.1H15.5c-8.6,0-15.5,7-15.5,15.5V586c0,8.6,7,15.5,15.5,15.5h178.9l-3.7,273.3\n\t\tc0,2.9,0.8,5.6,2.3,7.9l0,0c25.4,39,46.7,69.4,72.2,97.5c25.6,28.3,55,53.9,96.5,83.2c2.5,1.7,5.3,2.6,8.1,2.6l0,0h358.8h2.3h265\n\t\th91.5c3.4,0,6.4-1.2,8.9-3.1c41.1-29.1,70.4-54.6,95.8-82.7c25.5-28.2,46.8-58.5,72.2-97.5c1.7-2.6,2.4-5.5,2.3-8.4l-3.7-270.9\n\t\th178.8c8.6,0,15.5-7,15.5-15.5V486.5C1457.2,477.9,1450.3,471,1441.7,471z M1261.9,535.3L1261.9,535.3l0.1-4.6v-24h14.7\n\t\tc4.2,0,7.6,3.4,7.6,7.6V558c0,4.2-3.4,7.6-7.6,7.6h-14.4L1261.9,535.3z M195.3,536.3l-0.4,27.3h-14.4c-4.2,0-7.6-3.4-7.6-7.6v-43.7\n\t\tc0-4.2,3.4-7.6,7.6-7.6h14.7v25.9v4.6C195.3,535.6,195.3,536,195.3,536.3z M15.5,598c-6.6,0-12-5.4-12-12V484.6c0-6.6,5.4-12,12-12\n\t\th179.7v28.6h-14.7c-6.1,0-11.1,5-11.1,11.1V556c0,6.1,5,11.1,11.1,11.1h14.3l-0.4,30.8H15.5V598z M370.3,818.2h86.2v233.6h-85.1\n\t\tL370.3,818.2z M993.6,822.6v229.2H890.3V822.6H993.6z M889.7,822.6v229.2H783.1V822.6H889.7z M782.5,1051.8h-51.6h-2.3h-52.7V822.6\n\t\th106.6V1051.8z M675.4,822.6v229.2H568.7V822.6H675.4z M568.2,822.6v229.2H463.6V822.6H568.2z M1086.3,1051.8h-85.6V818.2h87.4\n\t\tL1086.3,1051.8z M1089.9,1050.1l1.8-235.4H366.8l1.1,235.8c-80-56.7-113.3-99.2-163.1-175.5l4.6-339.7v-4.6V266\n\t\tC305,155.3,349.9,108.6,461.3,14.1h31.6v161.7h3.5v-160H962v160h3.5V14.2h30.3c111.4,94.5,156.3,141.2,251.9,251.9v264.7v4.6\n\t\tl4.6,339.7C1202.8,951.1,1169.5,993.6,1089.9,1050.1z M1453.7,587.8c0,6.6-5.4,12-12,12h-178.9l-0.4-30.8h14.3\n\t\tc6.1,0,11.1-5,11.1-11.1v-43.7c0-6.1-5-11.1-11.1-11.1H1262v-28.6h179.7c6.6,0,12,5.4,12,12V587.8z"/>\n\t<path d="M118,501.3H59c-18.2,0-32.9,14.8-32.9,32.9s14.8,32.9,32.9,32.9h59c10.9,0,19.8-8.9,19.8-19.8V521\n\t\tC137.8,510.2,128.9,501.3,118,501.3z M134.3,547.4c0,9-7.3,16.3-16.3,16.3H59c-16.2,0-29.4-13.2-29.4-29.4s13.2-29.4,29.4-29.4h59\n\t\tc9,0,16.3,7.3,16.3,16.3V547.4z"/>\n\t<path d="M887.4,43.6c-15.6,0-30.5,7.3-40,19.7h-80.2c-17,0-30.8,13.8-30.8,30.8s13.8,30.8,30.8,30.8h80.2\n\t\tc9.5,12.4,24.4,19.7,40,19.7c27.9,0,50.5-22.7,50.5-50.5S915.2,43.6,887.4,43.6z M887.4,141.1c-15,0-28.8-6.9-37.7-19l-0.5-0.7h-82\n\t\tc-15,0-27.3-12.2-27.3-27.3s12.2-27.3,27.3-27.3h82l0.5-0.7c9-12.1,22.7-19,37.7-19c25.9,0,47,21.1,47,47S913.3,141.1,887.4,141.1z\n\t\t"/>\n\t<path d="M766.6,80.1c-7.7,0-13.9,6.2-13.9,13.9s6.2,13.9,13.9,13.9s13.9-6.2,13.9-13.9S774.2,80.1,766.6,80.1z M766.6,105.5\n\t\tc-6.3,0-11.4-5.1-11.4-11.4s5.1-11.4,11.4-11.4c6.3,0,11.4,5.1,11.4,11.4S772.9,105.5,766.6,105.5z"/>\n\t<path d="M887.4,65.1c-16,0-29,13-29,29s13,29,29,29s29-13,29-29S903.4,65.1,887.4,65.1z M887.4,120.2c-14.4,0-26.2-11.7-26.2-26.2\n\t\ts11.7-26.2,26.2-26.2c14.4,0,26.2,11.7,26.2,26.2S901.8,120.2,887.4,120.2z"/>\n</g>\n<g>\n\t<circle cx="766.6" cy="94.1" r="10.8"/>\n</g>\n<g>\n\t<circle pulse:initial="true" cx="887.4" cy="94.1" r="23.9"/>\n</g>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(err.message && err.message.indexOf(' ') === -1 && __(err.message) !== err.message ? __(err.message) : JSON.stringify(err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>