<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.build_in.views.generic_program.title',
	body: 'deviceClasses.build_in.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 1086.54 1077.77" style="enable-background:new 0 0 1086.54 1077.77;" xml:space="preserve" xmlns:pulse="-">\n<style type="text/css">\n\t.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#000000;}\n</style>\n<path d="M550.01,502.75h-11.03c-28.16,0-51.07-22.91-51.07-51.07V299.85c0-28.16,22.91-51.07,51.07-51.07h11.03\n\tc28.16,0,51.07,22.91,51.07,51.07v151.84C601.08,479.85,578.17,502.75,550.01,502.75 M538.98,255.87\n\tc-24.25,0-43.98,19.73-43.98,43.98v151.84c0,24.25,19.73,43.98,43.98,43.98h11.03c24.25,0,43.98-19.73,43.98-43.98V299.85\n\tc0-24.25-19.73-43.98-43.98-43.98H538.98z"/>\n<path d="M544.5,327.3c-15.71,0-28.49-12.78-28.49-28.49c0-15.71,12.78-28.49,28.49-28.49c15.71,0,28.49,12.78,28.49,28.49\n\tC572.98,314.52,560.2,327.3,544.5,327.3 M544.5,273.87c-13.75,0-24.94,11.19-24.94,24.94c0,13.76,11.19,24.95,24.94,24.95\n\tc13.75,0,24.94-11.19,24.94-24.95C569.44,285.06,558.25,273.87,544.5,273.87"/>\n<path d="M544.5,472.65c-15.71,0-28.49-12.78-28.49-28.49c0-15.71,12.78-28.49,28.49-28.49c15.71,0,28.49,12.78,28.49,28.49\n\tC572.98,459.87,560.2,472.65,544.5,472.65 M544.5,419.22c-13.75,0-24.94,11.19-24.94,24.95c0,13.75,11.19,24.94,24.94,24.94\n\tc13.75,0,24.94-11.19,24.94-24.94C569.44,430.41,558.25,419.22,544.5,419.22"/>\n<path d="M800.69,845.11H289.14V710.84h511.55V845.11z M296.23,838.02H793.6v-120.1H296.23V838.02z"/>\n<path d="M733.25,991H356.58c-18.62,0-33.78-15.15-33.78-33.78v-56.03c0-18.62,15.15-33.78,33.78-33.78h376.66\n\tc18.62,0,33.77,15.15,33.77,33.78v56.03C767.02,975.84,751.87,991,733.25,991 M356.58,874.5c-14.72,0-26.69,11.97-26.69,26.69v56.03\n\tc0,14.72,11.97,26.69,26.69,26.69h376.66c14.72,0,26.69-11.97,26.69-26.69v-56.03c0-14.72-11.97-26.69-26.69-26.69H356.58z"/>\n<path d="M513.33,976.36h-37.84c-15.55,0-28.19-12.65-28.19-28.19v-37.84c0-15.55,12.65-28.19,28.19-28.19h37.84\n\tc15.54,0,28.19,12.65,28.19,28.19v37.84C541.52,963.71,528.87,976.36,513.33,976.36 M475.49,885.68\n\tc-13.59,0-24.65,11.06-24.65,24.65v37.84c0,13.59,11.06,24.65,24.65,24.65h37.84c13.59,0,24.65-11.06,24.65-24.65v-37.84\n\tc0-13.59-11.06-24.65-24.65-24.65H475.49z"/>\n<path d="M615.23,976.36h-37.84c-15.55,0-28.19-12.65-28.19-28.19v-37.84c0-15.55,12.65-28.19,28.19-28.19h37.84\n\tc15.55,0,28.19,12.65,28.19,28.19v37.84C643.42,963.71,630.78,976.36,615.23,976.36 M577.39,885.68\n\tc-13.59,0-24.65,11.06-24.65,24.65v37.84c0,13.59,11.06,24.65,24.65,24.65h37.84c13.59,0,24.65-11.06,24.65-24.65v-37.84\n\tc0-13.59-11.06-24.65-24.65-24.65H577.39z"/>\n<path d="M494.41,963.68c-18.98,0-34.43-15.44-34.43-34.43c0-18.98,15.45-34.43,34.43-34.43c18.98,0,34.43,15.44,34.43,34.43\n\tC528.84,948.23,513.39,963.68,494.41,963.68 M494.41,898.36c-17.03,0-30.89,13.85-30.89,30.89c0,17.03,13.86,30.89,30.89,30.89\n\tc17.03,0,30.89-13.85,30.89-30.89C525.3,912.22,511.44,898.36,494.41,898.36"/>\n<path d="M392.75,963.68c-18.98,0-34.43-15.44-34.43-34.43c0-18.98,15.45-34.43,34.43-34.43c18.98,0,34.43,15.44,34.43,34.43\n\tC427.18,948.23,411.74,963.68,392.75,963.68 M392.75,898.36c-17.03,0-30.89,13.85-30.89,30.89c0,17.03,13.86,30.89,30.89,30.89\n\tc17.03,0,30.88-13.85,30.88-30.89C423.64,912.22,409.78,898.36,392.75,898.36"/>\n<path d="M697.97,963.68c-18.98,0-34.43-15.44-34.43-34.43c0-18.98,15.45-34.43,34.43-34.43c18.98,0,34.43,15.44,34.43,34.43\n\tC732.4,948.23,716.95,963.68,697.97,963.68 M697.97,898.36c-17.03,0-30.89,13.85-30.89,30.89c0,17.03,13.86,30.89,30.89,30.89\n\tc17.03,0,30.89-13.85,30.89-30.89C728.86,912.22,715,898.36,697.97,898.36"/>\n<path d="M596.31,963.68c-18.98,0-34.43-15.44-34.43-34.43c0-18.98,15.45-34.43,34.43-34.43c18.98,0,34.43,15.44,34.43,34.43\n\tC630.74,948.23,615.29,963.68,596.31,963.68 M596.31,898.36c-17.03,0-30.89,13.85-30.89,30.89c0,17.03,13.86,30.89,30.89,30.89\n\tc17.03,0,30.89-13.85,30.89-30.89C627.2,912.22,613.34,898.36,596.31,898.36"/>\n<path d="M981.59,144.88l-2.5-2.61l-9.15,9.15c-1.99,1.99-4.65,3.08-7.49,3.08c-2.84,0-5.5-1.09-7.49-3.08l-33.94-33.94\n\tc-4.13-4.13-4.13-10.85,0-14.98l7.71-7.7l-2.94-2.49C835.69,16.01,771.5,0,733.51,0H353.03c-68.82,0-142.54,50.2-192.28,92.3\n\tl-2.94,2.49l7.71,7.71c1.99,1.99,3.09,4.65,3.09,7.49c0,2.84-1.1,5.5-3.09,7.49l-33.94,33.94c-4.13,4.13-10.85,4.13-14.98,0\n\tl-9.14-9.15l-2.5,2.61C44.14,208.26,0,275.7,0,305.24v470.79c0,29.78,44.53,97.64,105.89,161.35l2.51,2.6l8.21-8.21\n\tc1.99-1.99,4.65-3.09,7.49-3.09c2.84,0,5.5,1.1,7.49,3.09l33.94,33.94c1.99,1.99,3.09,4.65,3.09,7.49c0,2.84-1.1,5.5-3.09,7.49\n\tl-6.68,6.68l2.95,2.49c39.39,33.21,98.81,75.41,158.27,87.83l0.36,0.07h445.7l0.36-0.07c59.46-12.43,118.89-54.62,158.27-87.84\n\tl2.95-2.49l-6.68-6.68c-4.13-4.13-4.13-10.85,0-14.98l33.94-33.94c1.99-1.99,4.65-3.09,7.49-3.09c2.84,0,5.5,1.1,7.49,3.09\n\tl8.21,8.21l2.51-2.6c61.35-63.72,105.89-131.58,105.89-161.35V305.24C1086.54,275.7,1042.4,208.26,981.59,144.88 M1079.46,776.03\n\tc0,23.23-35.52,84.79-101.41,153.83l-3.1-3.1c-3.33-3.33-7.77-5.16-12.5-5.16c-4.73,0-9.17,1.83-12.5,5.16l-33.94,33.94\n\tc-6.89,6.89-6.89,18.11,0,25l1.22,1.22c-38.65,32.2-95.41,71.85-151.84,83.76H321.15c-56.43-11.91-113.18-51.56-151.84-83.76\n\tl1.22-1.22c3.33-3.33,5.16-7.77,5.16-12.5c0-4.73-1.83-9.17-5.16-12.5l-33.94-33.94c-3.33-3.33-7.77-5.16-12.5-5.16\n\tc-4.73,0-9.17,1.83-12.5,5.16l-3.1,3.1C42.6,860.83,7.09,799.27,7.09,776.03V305.24c0-27.05,43.02-92.38,100.49-152.85l4.02,4.02\n\tc6.89,6.89,18.11,6.89,25,0l33.94-33.94c3.33-3.33,5.16-7.77,5.16-12.5c0-4.73-1.83-9.17-5.16-12.5l-2.25-2.26\n\tc31.44-26.31,62.25-47.2,91.63-62.1c34.06-17.28,65.39-26.04,93.12-26.04h380.48c27.73,0,59.06,8.76,93.12,26.04\n\tc29.38,14.91,60.19,35.79,91.63,62.1l-2.26,2.26c-6.89,6.89-6.89,18.11,0,25l33.94,33.94c3.33,3.33,7.77,5.16,12.5,5.16\n\tc4.73,0,9.17-1.83,12.5-5.16l4.02-4.02c57.46,60.47,100.49,125.8,100.49,152.85V776.03z"/>\n<path d="M741.83,54.43c-62.89-27.34-129.7-41.2-198.56-41.2S407.6,27.09,344.71,54.43c-60.73,26.4-115.27,64.19-162.09,112.32\n\tC135.81,214.87,99.05,270.9,73.38,333.29C46.8,397.87,33.33,466.47,33.33,537.17c0,70.7,13.47,139.3,40.05,203.88\n\tc25.67,62.39,62.43,118.42,109.24,166.53c46.83,48.13,101.36,85.92,162.09,112.32c62.89,27.34,129.7,41.21,198.56,41.21\n\ts135.67-13.86,198.56-41.21c60.73-26.4,115.26-64.19,162.09-112.32c46.81-48.12,83.57-104.15,109.24-166.53\n\tc26.58-64.58,40.05-133.18,40.05-203.88c0-70.7-13.47-139.3-40.05-203.88c-25.67-62.39-62.43-118.42-109.24-166.53\n\tC857.1,118.63,802.56,80.83,741.83,54.43 M1030.8,444h-54.75c-7.75,0-14.06,6.31-14.06,14.06c0,7.75,6.31,14.06,14.06,14.06h59.01\n\tc0.41,3.32,0.79,6.65,1.13,9.98h-60.14c-6.76,0-12.29,5.53-12.29,12.29c0,6.76,5.53,12.29,12.29,12.29h62.12\n\tc0.22,3.91,0.41,7.83,0.54,11.76h-62.66c-6.76,0-12.29,5.53-12.29,12.29c0,6.76,5.53,12.29,12.29,12.29H1039\n\tc-0.05,4.82-0.17,9.63-0.35,14.43h-62.6c-6.76,0-12.29,5.53-12.29,12.29c0,6.76,5.53,12.29,12.29,12.29h61.11\n\tc-0.33,3.93-0.71,7.84-1.13,11.75h-59.98c-6.76,0-12.29,5.53-12.29,12.29s5.53,12.29,12.29,12.29h56.76\n\tc-0.61,3.93-1.27,7.85-1.97,11.76h-54.79c-6.76,0-12.29,5.53-12.29,12.29c0,6.76,5.53,12.29,12.29,12.29h49.77\n\tc-0.9,3.93-1.85,7.85-2.85,11.76h-46.92c-6.76,0-12.29,5.53-12.29,12.29s5.53,12.29,12.29,12.29h40.01\n\tc-4.64,15.07-9.97,29.94-16.01,44.61c-24.98,60.71-60.74,115.23-106.29,162.04c-45.53,46.8-98.55,83.55-157.58,109.21\n\tc-61.1,26.56-126,40.03-192.91,40.03c-66.91,0-131.81-13.47-192.91-40.03c-59.03-25.66-112.05-62.41-157.59-109.21\n\tc-45.55-46.82-81.31-101.34-106.29-162.04c-6.03-14.66-11.36-29.54-16.01-44.61h39.97c6.76,0,12.29-5.53,12.29-12.29\n\ts-5.53-12.29-12.29-12.29H63.57c-0.99-3.91-1.94-7.83-2.85-11.76h49.72c6.76,0,12.29-5.53,12.29-12.29\n\tc0-6.76-5.53-12.29-12.29-12.29H55.7c-0.7-3.91-1.36-7.83-1.97-11.76h56.71c6.76,0,12.29-5.53,12.29-12.29s-5.53-12.29-12.29-12.29\n\tH50.51c-0.42-3.91-0.8-7.83-1.13-11.75h61.06c6.76,0,12.29-5.53,12.29-12.29c0-6.76-5.53-12.29-12.29-12.29H47.89\n\tc-0.18-4.8-0.3-9.61-0.35-14.43h62.91c6.76,0,12.29-5.53,12.29-12.29c0-6.76-5.53-12.29-12.29-12.29H47.83\n\tc0.14-3.93,0.32-7.84,0.54-11.76h62.07c6.76,0,12.29-5.53,12.29-12.29c0-6.76-5.53-12.29-12.29-12.29h-60.1\n\tc0.41-3.93,0.86-7.85,1.36-11.75h58.74c6.76,0,12.29-5.53,12.29-12.29c0-6.76-5.53-12.29-12.29-12.29H55.43\n\tc6.45-36.68,16.82-72.48,31.06-107.09c24.98-60.71,60.74-115.23,106.29-162.04c45.54-46.8,98.56-83.55,157.59-109.21\n\tc61.1-26.56,126-40.03,192.91-40.03c66.91,0,131.81,13.47,192.91,40.03c59.03,25.66,112.05,62.4,157.58,109.21\n\tc45.55,46.82,81.31,101.34,106.29,162.04C1014.07,372.74,1024.33,407.94,1030.8,444"/>\n<path d="M392.75,894.82c-18.98,0-34.43,15.44-34.43,34.43c0,18.98,15.45,34.43,34.43,34.43c18.98,0,34.43-15.44,34.43-34.43\n\tC427.18,910.26,411.74,894.82,392.75,894.82 M392.75,960.13c-17.03,0-30.89-13.85-30.89-30.89c0-17.03,13.86-30.89,30.89-30.89\n\tc17.03,0,30.88,13.85,30.88,30.89C423.64,946.28,409.78,960.13,392.75,960.13"/>\n<path d="M415.79,882.04l-0.18-0.04h-29.67c-26.02,0-47.2,21.17-47.2,47.2c0,26.02,21.17,47.2,47.2,47.2h30.08l0.19-0.04\n\tc12.94-2.92,22.33-14.65,22.33-27.9v-38.42C438.55,896.58,428.97,884.81,415.79,882.04 M435,948.46c0,11.54-8.14,21.77-19.38,24.4\n\th-29.68c-24.07,0-43.65-19.58-43.65-43.65s19.58-43.65,43.65-43.65h29.3c11.46,2.49,19.77,12.76,19.77,24.49V948.46z"/>\n<path d="M703.89,882.01h-30.53l-0.39,0.04c-12.97,2.92-22.39,14.67-22.39,27.95v38.49c0,13.3,9.04,24.75,21.99,27.86l0.2,0.05h31.11\n\tc26.02,0,47.2-21.17,47.2-47.2C751.09,903.18,729.92,882.01,703.89,882.01 M703.89,972.86h-30.69\n\tc-11.07-2.75-19.08-12.97-19.08-24.37V910c0-11.57,8.16-21.83,19.44-24.45h30.33c24.07,0,43.65,19.58,43.65,43.65\n\tC747.55,953.27,727.96,972.86,703.89,972.86"/>\n<path d="M697.97,894.82c-18.98,0-34.43,15.44-34.43,34.43c0,18.98,15.45,34.43,34.43,34.43c18.98,0,34.43-15.44,34.43-34.43\n\tC732.4,910.26,716.95,894.82,697.97,894.82 M697.97,960.13c-17.03,0-30.89-13.85-30.89-30.89c0-17.03,13.86-30.89,30.89-30.89\n\tc17.03,0,30.89,13.85,30.89,30.89C728.86,946.28,715,960.13,697.97,960.13"/>\n<path pulse:initial="true" class="st0" d="M544.5,273.82c13.8,0,24.99,11.19,24.99,24.99c0,13.8-11.19,24.99-24.99,24.99c-13.8,0-24.99-11.19-24.99-24.99\n\tC519.51,285.01,530.69,273.82,544.5,273.82"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(err.message && err.message.indexOf(' ') === -1 && __(err.message) !== err.message ? __(err.message) : JSON.stringify(err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>